# üöÄ –ü–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏–π WireGuard Universal Setup Script

## üîç –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–∏—Ö –ø—Ä–æ–±–ª–µ–º

### ‚ùå –ü—Ä–æ–±–ª–µ–º—ã, –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –≤ –ª–æ–≥–∞—Ö:
1. **–ò–Ω—Ç–µ—Ä–Ω–µ—Ç —á–µ—Ä–µ–∑ VPN –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –æ—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞
2. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ NAT –ø—Ä–∞–≤–∏–ª–∞** - 6-7 –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –ø—Ä–∞–≤–∏–ª MASQUERADE
3. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç —Å Docker** - –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è 172.17.0.0/16 –º–æ–≥—É—Ç –º–µ—à–∞—Ç—å
4. **–ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ iptables –ø—Ä–∞–≤–∏–ª** - –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫
5. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±–ª–∞—á–Ω–æ–≥–æ firewall** - –ø–æ—Ä—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–∫—Ä—ã—Ç –∏–∑–≤–Ω–µ

### üìä –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- ‚úÖ WireGuard –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Peer –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è (–≤–∏–¥–Ω—ã allowed ips: 10.0.0.2/32)
- ‚úÖ Post-up –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è
- ‚ùå –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-—Ç—Ä–∞—Ñ–∏–∫ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ NAT

## üéØ –ü–ª–∞–Ω –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π

### 1. üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ NAT –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏

#### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ iptables
**–†–µ—à–µ–Ω–∏–µ:**
- –£–ø—Ä–æ—Å—Ç–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ NAT –¥–æ –æ–¥–Ω–æ–≥–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ FORWARD –ø—Ä–∞–≤–∏–ª
- –î–æ–±–∞–≤–∏—Ç—å —è–≤–Ω—É—é –æ—á–∏—Å—Ç–∫—É –≤—Å–µ—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏—Ö –ø—Ä–∞–≤–∏–ª
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å Docker

```bash
# –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ –∫ NAT:
iptables -t nat -A POSTROUTING -s 10.0.0.0/24 ! -d 10.0.0.0/24 -j MASQUERADE

# –£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ FORWARD –ø—Ä–∞–≤–∏–ª–∞:
iptables -A FORWARD -i wg0 -o ens3 -j ACCEPT
iptables -A FORWARD -i ens3 -o wg0 -m state --state RELATED,ESTABLISHED -j ACCEPT
```

### 2. üåê –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–ª–∞—á–Ω–æ–≥–æ firewall

#### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–∫—Ä—ã—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
**–†–µ—à–µ–Ω–∏–µ:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ—Ä—Ç–∞ –∏–∑–≤–Ω–µ
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ firewall –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ—Ä—Ç—ã (80, 53) –¥–ª—è –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–≤–Ω–µ:
curl -s "https://portchecker.co/check?host=$SERVER_IP&port=$WG_PORT"
```

### 3. üê≥ –†–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å Docker

#### –ü—Ä–æ–±–ª–µ–º–∞: Docker –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å VPN —Ç—Ä–∞—Ñ–∏–∫
**–†–µ—à–µ–Ω–∏–µ:**
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–ª–∏—á–∏—è Docker
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è Docker

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker:
if systemctl is-active docker >/dev/null 2>&1; then
    # –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è Docker + WireGuard
fi
```

### 4. üì± –£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤

#### –ü—Ä–æ–±–ª–µ–º–∞: –°–ª–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å –≥–¥–µ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–±–æ–π
**–†–µ—à–µ–Ω–∏–µ:**
- –ü–æ—à–∞–≥–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤ –¥–ª—è —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∏

### 5. üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã NAT

#### –ü—Ä–æ–±–ª–µ–º–∞: MASQUERADE –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å—Ä–µ–¥–∞—Ö
**–†–µ—à–µ–Ω–∏–µ:**
- SNAT –≤–º–µ—Å—Ç–æ MASQUERADE
- Policy routing –¥–ª—è VPN —Ç—Ä–∞—Ñ–∏–∫–∞
- Bridge —Ä–µ–∂–∏–º –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞

```bash
# SNAT –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:
iptables -t nat -A POSTROUTING -s 10.0.0.0/24 -j SNAT --to-source $SERVER_IP
```

## üöÄ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (v4.0)

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
1. **–ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ iptables –ª–æ–≥–∏–∫–∏**
   - –û–¥–∏–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π NAT rule –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö
   - –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ FORWARD –ø—Ä–∞–≤–∏–ª
   - –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Docker

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–ª–∞—á–Ω–æ–≥–æ firewall**
   - –í–Ω–µ—à–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ—Ä—Ç–∞
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è AWS, DigitalOcean, Vultr, etc.

3. **–£–º–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
   - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é
   - –ü–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
4. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã NAT**
   - MASQUERADE, SNAT, Policy routing
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ª—É—á—à–µ–≥–æ –º–µ—Ç–æ–¥–∞

5. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º–∏**
   - Docker, UFW, –¥—Ä—É–≥–∏–µ VPN
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

6. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤**
   - QR –∫–æ–¥—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ DNS
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
7. **Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**
   - –ü—Ä–æ—Å—Ç–∞—è –≤–µ–±-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏

8. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã**
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
1. **–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**
   ```
   wg-setup/
   ‚îú‚îÄ‚îÄ core/
   ‚îÇ   ‚îú‚îÄ‚îÄ firewall.sh     # –õ–æ–≥–∏–∫–∞ iptables
   ‚îÇ   ‚îú‚îÄ‚îÄ network.sh      # –°–µ—Ç–µ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
   ‚îÇ   ‚îî‚îÄ‚îÄ cloud.sh        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–ª–∞—á–Ω—ã—Ö firewall
   ‚îú‚îÄ‚îÄ modules/
   ‚îÇ   ‚îú‚îÄ‚îÄ docker.sh       # –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Docker
   ‚îÇ   ‚îú‚îÄ‚îÄ providers/      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
   ‚îÇ   ‚îî‚îÄ‚îÄ diagnostics.sh  # –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
   ‚îî‚îÄ‚îÄ wg-universal-setup.sh  # –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
   ```

2. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**
   ```bash
   # /etc/wireguard/wg-setup.conf
   NAT_METHOD="auto"  # auto, masquerade, snat, policy
   DOCKER_COMPAT="true"
   CLOUD_PROVIDER="auto"  # aws, do, vultr, manual
   ```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:
1. **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞**
   - L2: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ –º–∞—Ä—à—Ä—É—Ç—ã
   - L3: IP connectivity –∏ NAT
   - L4: Port accessibility 
   - L7: DNS –∏ HTTP –ø—Ä–æ–≤–µ—Ä–∫–∏

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**
   ```bash
   # –ü—Ä–∏–º–µ—Ä –ª–æ–≥–∏–∫–∏ –∞–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
   if ! test_nat_connectivity; then
       if test_snat_alternative; then
           switch_to_snat
       elif test_policy_routing; then
           setup_policy_routing
       fi
   fi
   ```

## üìã Roadmap

### v3.2 (Hotfix) - –ù–µ–¥–µ–ª—è 1:
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ iptables
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∏–µ NAT –ø—Ä–∞–≤–∏–ª
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–ª–∞—á–Ω–æ–≥–æ firewall

### v3.5 (–£–ª—É—á—à–µ–Ω–∏—è) - –ù–µ–¥–µ–ª—è 2:
- üîÑ Docker —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã NAT
- üîÑ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### v4.0 (–ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞) - –ú–µ—Å—è—Ü 1:
- üîÑ –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- üîÑ Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

## üéØ –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

### –î–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π –ø—Ä–æ–±–ª–µ–º—ã:
1. **–£–ø—Ä–æ—Å—Ç–∏—Ç—å NAT –¥–æ –æ–¥–Ω–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞**
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–Ω–µ—à–Ω—é—é –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–∞**
3. **–ò—Å–∫–ª—é—á–∏—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å Docker**
4. **–î–æ–±–∞–≤–∏—Ç—å –ø–æ—à–∞–≥–æ–≤—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É**

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```bash
# 1. –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ NAT –ø—Ä–∞–≤–∏–ª–∞
iptables -t nat -F POSTROUTING

# 2. –î–æ–±–∞–≤–∏—Ç—å –æ–¥–∏–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π NAT rule
iptables -t nat -A POSTROUTING -s 10.0.0.0/24 ! -d 10.0.0.0/24 -j MASQUERADE

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–Ω–µ—à–Ω—é—é –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
nmap -p 443 -sU $SERVER_IP

# 4. –¢–µ—Å—Ç —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–æ–º
./wg-universal-setup.sh --test-client
```

---

**–ê–≤—Ç–æ—Ä:** Senior Shell Developer  
**–î–∞—Ç–∞:** 26 –∏—é–ª—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ üöß